{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Desktop/REACT/mernChat/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/User/Desktop/REACT/mernChat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/User/Desktop/REACT/mernChat/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\REACT\\\\mernChat\\\\components\\\\Profile\\\\Settings.js\",\n    _s = $RefreshSig$(),\n    _this = this,\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { List, Divider, Message, Checkbox, Form, Button } from 'semantic-ui-react';\nimport { passwordUpdate, toggleMessagePopup } from '../../utils/profileActions';\n\nfunction Settings(_ref) {\n  _s();\n\n  var newMessagePopup = _ref.newMessagePopup;\n\n  var _useState = useState(false),\n      passwordFields = _useState[0],\n      showPasswordFields = _useState[1];\n\n  var _useState2 = useState(newMessagePopup),\n      popupSetting = _useState2[0],\n      setPopupSetting = _useState2[1];\n\n  var _useState3 = useState(false),\n      success = _useState3[0],\n      setSuccess = _useState3[1];\n\n  var _useState4 = useState(false),\n      newMessageSettings = _useState4[0],\n      showNewMessageSettings = _useState4[1];\n\n  var isFirstRun = useRef(true);\n  useEffect(function () {\n    success && setTimeout(function () {\n      return setSuccess(false);\n    }, 3000);\n  }, [success]);\n  useEffect(function () {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n  }, [popupSetting]);\n  return __jsx(React.Fragment, null, success && __jsx(React.Fragment, null, __jsx(Message, {\n    success: true,\n    icon: \"check circle\",\n    header: \"Updated Successfully\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 11\n    }\n  }), __jsx(Divider, {\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 11\n    }\n  })), __jsx(List, {\n    size: \"huge\",\n    animated: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, __jsx(List.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, __jsx(List.Icon, {\n    name: \"user secret\",\n    size: \"large\",\n    verticalAlign: \"middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }), __jsx(List.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, __jsx(List.Header, {\n    onClick: function onClick() {\n      return showPasswordFields(!passwordFields);\n    },\n    as: \"a\",\n    content: \"Update Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  })), passwordFields && __jsx(UpdatePassword, {\n    setSuccess: setSuccess,\n    showPasswordFields: showPasswordFields,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  })), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), __jsx(List.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, __jsx(List.Icon, {\n    name: \"paper plane outline\",\n    size: \"large\",\n    verticalAlign: \"middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }), __jsx(List.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, __jsx(List.Header, {\n    onClick: function onClick() {\n      return showNewMessageSettings(!newMessageSettings);\n    },\n    as: \"a\",\n    content: \"Show New Message Popup?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  })), newMessageSettings && __jsx(\"div\", {\n    style: {\n      marginTop: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \"Control whether a Popup should appear when there is a New Message or not.\", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }), __jsx(Checkbox, {\n    checked: popupSetting,\n    toggle: true,\n    onChange: function onChange() {\n      return toggleMessagePopup(popupSetting, setPopupSetting, setSuccess);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }))), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(Settings, \"2e3OQSxLRnrnkK/zKUUOmFsMtzU=\");\n\n_c = Settings;\n\nvar UpdatePassword = function UpdatePassword(_ref2) {\n  _s2();\n\n  var setSuccess = _ref2.setSuccess,\n      showPasswordFields = _ref2.showPasswordFields;\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var _useState6 = useState(null),\n      errorMsg = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState({\n    currentPassword: '',\n    newPassword: ''\n  }),\n      userPasswords = _useState7[0],\n      setUserPasswords = _useState7[1];\n\n  var _useState8 = useState({\n    field1: false,\n    field2: false\n  }),\n      typed = _useState8[0],\n      showTyped = _useState8[1];\n\n  var field1 = typed.field1,\n      field2 = typed.field2;\n  var currentPassword = userPasswords.currentPassword,\n      newPassword = userPasswords.newPassword;\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setUserPasswords(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, name, value));\n    });\n  }; //this will only run after the errorMsg changes\n\n\n  useEffect(function () {\n    errorMsg && setTimeout(function () {\n      return setError(null);\n    }, 5000);\n  }, [errorMsg]);\n  return __jsx(React.Fragment, null, __jsx(Form, {\n    error: errorMsg !== null,\n    loading: loading,\n    onSubmit: /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                setLoading(true); //do we really need to add await again\n\n                _context.next = 4;\n                return passwordUpdate(setSuccess, userPasswords);\n\n              case 4:\n                setLoading(false);\n                showPasswordFields(false);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, __jsx(List.List, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, __jsx(List.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Input, {\n    fluid: true,\n    icon: {\n      name: 'eye',\n      circular: true,\n      link: true,\n      onClick: function onClick() {\n        return showTyped(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, {\n            field1: !field1\n          });\n        });\n      }\n    },\n    type: field1 ? 'text' : 'password',\n    iconPosition: \"left\",\n    label: \"Current Password\",\n    placeholder: \"Enter current Password\",\n    name: \"currentPassword\",\n    onChange: handleChange,\n    value: currentPassword,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }), __jsx(Form.Input, {\n    fluid: true,\n    icon: {\n      name: 'eye',\n      circular: true,\n      link: true,\n      onClick: function onClick() {\n        return showTyped(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, {\n            field2: !field2\n          });\n        });\n      }\n    },\n    type: field2 ? 'text' : 'password',\n    iconPosition: \"left\",\n    label: \"New Password\",\n    placeholder: \"Enter New Password\",\n    name: \"newPassword\",\n    onChange: handleChange,\n    value: newPassword,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    disabled: loading || currentPassword === '' || newPassword === '',\n    compact: true,\n    icon: \"configure\",\n    type: \"submit\",\n    color: \"teal\",\n    content: \"Confirm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    disabled: loading,\n    compact: true,\n    icon: \"cancel\",\n    type: \"button\",\n    content: \"Cancel\",\n    onClick: function onClick() {\n      return showPasswordFields(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }), __jsx(Message, {\n    icon: \"meh\",\n    error: true,\n    header: \"Oops!\",\n    content: errorMsg,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  })))), __jsx(Divider, {\n    hidden: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }\n  }));\n};\n\n_s2(UpdatePassword, \"hung5UN/kRrUfmUM+itj+HJ1U5Y=\");\n\n_c2 = UpdatePassword;\nexport default Settings;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Settings\");\n$RefreshReg$(_c2, \"UpdatePassword\");","map":{"version":3,"sources":["C:/Users/User/Desktop/REACT/mernChat/components/Profile/Settings.js"],"names":["React","useState","useEffect","useRef","List","Divider","Message","Checkbox","Form","Button","passwordUpdate","toggleMessagePopup","Settings","newMessagePopup","passwordFields","showPasswordFields","popupSetting","setPopupSetting","success","setSuccess","newMessageSettings","showNewMessageSettings","isFirstRun","setTimeout","current","marginTop","UpdatePassword","loading","setLoading","errorMsg","setError","currentPassword","newPassword","userPasswords","setUserPasswords","field1","field2","typed","showTyped","handleChange","e","target","name","value","prev","preventDefault","circular","link","onClick"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  List,\r\n  Divider,\r\n  Message,\r\n  Checkbox,\r\n  Form,\r\n  Button,\r\n} from 'semantic-ui-react';\r\nimport { passwordUpdate, toggleMessagePopup } from '../../utils/profileActions';\r\n\r\nfunction Settings({ newMessagePopup }) {\r\n  const [passwordFields, showPasswordFields] = useState(false);\r\n  const [popupSetting, setPopupSetting] = useState(newMessagePopup);\r\n  const [success, setSuccess] = useState(false);\r\n  const [newMessageSettings, showNewMessageSettings] = useState(false);\r\n\r\n  const isFirstRun = useRef(true);\r\n\r\n  useEffect(() => {\r\n    success && setTimeout(() => setSuccess(false), 3000);\r\n  }, [success]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstRun.current) {\r\n      isFirstRun.current = false;\r\n      return;\r\n    }\r\n  }, [popupSetting]);\r\n\r\n  return (\r\n    <>\r\n      {success && (\r\n        <>\r\n          <Message success icon=\"check circle\" header=\"Updated Successfully\" />\r\n          <Divider hidden />\r\n        </>\r\n      )}\r\n\r\n      <List size=\"huge\" animated>\r\n        <List.Item>\r\n          <List.Icon name=\"user secret\" size=\"large\" verticalAlign=\"middle\" />\r\n          <List.Content>\r\n            <List.Header\r\n              onClick={() => showPasswordFields(!passwordFields)}\r\n              as=\"a\"\r\n              content=\"Update Password\"\r\n            />\r\n          </List.Content>\r\n\r\n          {passwordFields && (\r\n            <UpdatePassword\r\n              setSuccess={setSuccess}\r\n              showPasswordFields={showPasswordFields}\r\n            />\r\n          )}\r\n        </List.Item>\r\n        <Divider />\r\n\r\n        <List.Item>\r\n          <List.Icon\r\n            name=\"paper plane outline\"\r\n            size=\"large\"\r\n            verticalAlign=\"middle\"\r\n          />\r\n\r\n          <List.Content>\r\n            <List.Header\r\n              onClick={() => showNewMessageSettings(!newMessageSettings)}\r\n              as=\"a\"\r\n              content=\"Show New Message Popup?\"\r\n            />\r\n          </List.Content>\r\n\r\n          {newMessageSettings && (\r\n            <div style={{ marginTop: '10px' }}>\r\n              Control whether a Popup should appear when there is a New Message\r\n              or not.\r\n              <br />\r\n              <br />\r\n              <Checkbox\r\n                checked={popupSetting}\r\n                toggle\r\n                onChange={() =>\r\n                  toggleMessagePopup(popupSetting, setPopupSetting, setSuccess)\r\n                }\r\n              />\r\n            </div>\r\n          )}\r\n        </List.Item>\r\n\r\n        <Divider />\r\n      </List>\r\n    </>\r\n  );\r\n}\r\n\r\nconst UpdatePassword = ({ setSuccess, showPasswordFields }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setError] = useState(null);\r\n\r\n  const [userPasswords, setUserPasswords] = useState({\r\n    currentPassword: '',\r\n    newPassword: '',\r\n  });\r\n  const [typed, showTyped] = useState({\r\n    field1: false,\r\n    field2: false,\r\n  });\r\n\r\n  const { field1, field2 } = typed;\r\n\r\n  const { currentPassword, newPassword } = userPasswords;\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserPasswords((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  //this will only run after the errorMsg changes\r\n  useEffect(() => {\r\n    errorMsg && setTimeout(() => setError(null), 5000);\r\n  }, [errorMsg]);\r\n\r\n  return (\r\n    <>\r\n      <Form\r\n        error={errorMsg !== null}\r\n        loading={loading}\r\n        onSubmit={async (e) => {\r\n          e.preventDefault();\r\n          setLoading(true);\r\n\r\n          //do we really need to add await again\r\n          await passwordUpdate(setSuccess, userPasswords);\r\n          setLoading(false);\r\n\r\n          showPasswordFields(false);\r\n        }}\r\n      >\r\n        <List.List>\r\n          <List.Item>\r\n            <Form.Input\r\n              fluid\r\n              icon={{\r\n                name: 'eye',\r\n                circular: true,\r\n                link: true,\r\n                onClick: () =>\r\n                  showTyped((prev) => ({ ...prev, field1: !field1 })),\r\n              }}\r\n              type={field1 ? 'text' : 'password'}\r\n              iconPosition=\"left\"\r\n              label=\"Current Password\"\r\n              placeholder=\"Enter current Password\"\r\n              name=\"currentPassword\"\r\n              onChange={handleChange}\r\n              value={currentPassword}\r\n            />\r\n\r\n            <Form.Input\r\n              fluid\r\n              icon={{\r\n                name: 'eye',\r\n                circular: true,\r\n                link: true,\r\n                onClick: () =>\r\n                  showTyped((prev) => ({ ...prev, field2: !field2 })),\r\n              }}\r\n              type={field2 ? 'text' : 'password'}\r\n              iconPosition=\"left\"\r\n              label=\"New Password\"\r\n              placeholder=\"Enter New Password\"\r\n              name=\"newPassword\"\r\n              onChange={handleChange}\r\n              value={newPassword}\r\n            />\r\n\r\n            {/* BUTTONS */}\r\n\r\n            <Button\r\n              disabled={loading || currentPassword === '' || newPassword === ''}\r\n              compact\r\n              icon=\"configure\"\r\n              type=\"submit\"\r\n              color=\"teal\"\r\n              content=\"Confirm\"\r\n            />\r\n\r\n            <Button\r\n              disabled={loading}\r\n              compact\r\n              icon=\"cancel\"\r\n              type=\"button\"\r\n              content=\"Cancel\"\r\n              onClick={() => showPasswordFields(false)}\r\n            />\r\n\r\n            <Message icon=\"meh\" error header=\"Oops!\" content={errorMsg} />\r\n          </List.Item>\r\n        </List.List>\r\n      </Form>\r\n      <Divider hidden />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n"]},"metadata":{},"sourceType":"module"}