{"ast":null,"code":"import axios from 'axios';\nimport baseUrl from './baseUrl';\nimport catchErrors from './catchErrors';\nimport Router from 'next/router';\nimport cookie from 'js-cookie';\nexport const registerUser = async (user, profilePicUrl, setError, setLoading) => {\n  try {\n    const res = await axios.post(`${baseUrl}/api/signup`, {\n      user,\n      profilePicUrl\n    });\n    setToken(res.data);\n  } catch (error) {\n    const errorMsg = catchErrors(error);\n    setError(errorMsg);\n  }\n\n  setLoading(false);\n};\nexport const loginUser = async (user, setError, setLoading) => {\n  setLoading(true);\n\n  try {\n    const res = await axios.post(`${baseUrl}/api/auth`, {\n      user\n    });\n    setToken(res.data);\n  } catch (error) {\n    const errorMsg = catchErrors(error);\n    setError(errorMsg);\n  }\n\n  setLoading(false);\n};\nexport const redirectUser = (ctx, location) => {\n  if (ctx.req) {\n    ctx.res.writeHead(302, {\n      Location: location\n    });\n    ctx.res.end();\n  } else {\n    Router.push(location);\n  }\n};\n\nconst setToken = token => {\n  cookie.set('token', token);\n  Router.push('/');\n}; //why all of these?\n\n\nexport const logoutUser = email => {\n  cookie.set('userEmail', email);\n  cookie.remove('token');\n  Router.push('/login');\n  Router.reload();\n};","map":{"version":3,"sources":["C:/Users/User/Desktop/ADVANCED REACT/mernChat/utils/authUser.js"],"names":["axios","baseUrl","catchErrors","Router","cookie","registerUser","user","profilePicUrl","setError","setLoading","res","post","setToken","data","error","errorMsg","loginUser","redirectUser","ctx","location","req","writeHead","Location","end","push","token","set","logoutUser","email","remove","reload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAO,MAAMC,YAAY,GAAG,OAC1BC,IAD0B,EAE1BC,aAF0B,EAG1BC,QAH0B,EAI1BC,UAJ0B,KAKvB;AACH,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,IAAN,CAAY,GAAEV,OAAQ,aAAtB,EAAoC;AACpDK,MAAAA,IADoD;AAEpDC,MAAAA;AAFoD,KAApC,CAAlB;AAKAK,IAAAA,QAAQ,CAACF,GAAG,CAACG,IAAL,CAAR;AACD,GAPD,CAOE,OAAOC,KAAP,EAAc;AACd,UAAMC,QAAQ,GAAGb,WAAW,CAACY,KAAD,CAA5B;AACAN,IAAAA,QAAQ,CAACO,QAAD,CAAR;AACD;;AACDN,EAAAA,UAAU,CAAC,KAAD,CAAV;AACD,CAlBM;AAoBP,OAAO,MAAMO,SAAS,GAAG,OAAOV,IAAP,EAAaE,QAAb,EAAuBC,UAAvB,KAAsC;AAC7DA,EAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,IAAN,CAAY,GAAEV,OAAQ,WAAtB,EAAkC;AAAEK,MAAAA;AAAF,KAAlC,CAAlB;AAEAM,IAAAA,QAAQ,CAACF,GAAG,CAACG,IAAL,CAAR;AACD,GAJD,CAIE,OAAOC,KAAP,EAAc;AACd,UAAMC,QAAQ,GAAGb,WAAW,CAACY,KAAD,CAA5B;AACAN,IAAAA,QAAQ,CAACO,QAAD,CAAR;AACD;;AACDN,EAAAA,UAAU,CAAC,KAAD,CAAV;AACD,CAXM;AAaP,OAAO,MAAMQ,YAAY,GAAG,CAACC,GAAD,EAAMC,QAAN,KAAmB;AAC7C,MAAID,GAAG,CAACE,GAAR,EAAa;AACXF,IAAAA,GAAG,CAACR,GAAJ,CAAQW,SAAR,CAAkB,GAAlB,EAAuB;AAAEC,MAAAA,QAAQ,EAAEH;AAAZ,KAAvB;AACAD,IAAAA,GAAG,CAACR,GAAJ,CAAQa,GAAR;AACD,GAHD,MAGO;AACLpB,IAAAA,MAAM,CAACqB,IAAP,CAAYL,QAAZ;AACD;AACF,CAPM;;AASP,MAAMP,QAAQ,GAAIa,KAAD,IAAW;AAC1BrB,EAAAA,MAAM,CAACsB,GAAP,CAAW,OAAX,EAAoBD,KAApB;AACAtB,EAAAA,MAAM,CAACqB,IAAP,CAAY,GAAZ;AACD,CAHD,C,CAKA;;;AACA,OAAO,MAAMG,UAAU,GAAIC,KAAD,IAAW;AACnCxB,EAAAA,MAAM,CAACsB,GAAP,CAAW,WAAX,EAAwBE,KAAxB;AACAxB,EAAAA,MAAM,CAACyB,MAAP,CAAc,OAAd;AACA1B,EAAAA,MAAM,CAACqB,IAAP,CAAY,QAAZ;AACArB,EAAAA,MAAM,CAAC2B,MAAP;AACD,CALM","sourcesContent":["import axios from 'axios';\r\nimport baseUrl from './baseUrl';\r\nimport catchErrors from './catchErrors';\r\nimport Router from 'next/router';\r\nimport cookie from 'js-cookie';\r\n\r\nexport const registerUser = async (\r\n  user,\r\n  profilePicUrl,\r\n  setError,\r\n  setLoading\r\n) => {\r\n  try {\r\n    const res = await axios.post(`${baseUrl}/api/signup`, {\r\n      user,\r\n      profilePicUrl,\r\n    });\r\n\r\n    setToken(res.data);\r\n  } catch (error) {\r\n    const errorMsg = catchErrors(error);\r\n    setError(errorMsg);\r\n  }\r\n  setLoading(false);\r\n};\r\n\r\nexport const loginUser = async (user, setError, setLoading) => {\r\n  setLoading(true);\r\n  try {\r\n    const res = await axios.post(`${baseUrl}/api/auth`, { user });\r\n\r\n    setToken(res.data);\r\n  } catch (error) {\r\n    const errorMsg = catchErrors(error);\r\n    setError(errorMsg);\r\n  }\r\n  setLoading(false);\r\n};\r\n\r\nexport const redirectUser = (ctx, location) => {\r\n  if (ctx.req) {\r\n    ctx.res.writeHead(302, { Location: location });\r\n    ctx.res.end();\r\n  } else {\r\n    Router.push(location);\r\n  }\r\n};\r\n\r\nconst setToken = (token) => {\r\n  cookie.set('token', token);\r\n  Router.push('/');\r\n};\r\n\r\n//why all of these?\r\nexport const logoutUser = (email) => {\r\n  cookie.set('userEmail', email);\r\n  cookie.remove('token');\r\n  Router.push('/login');\r\n  Router.reload();\r\n};\r\n"]},"metadata":{},"sourceType":"module"}