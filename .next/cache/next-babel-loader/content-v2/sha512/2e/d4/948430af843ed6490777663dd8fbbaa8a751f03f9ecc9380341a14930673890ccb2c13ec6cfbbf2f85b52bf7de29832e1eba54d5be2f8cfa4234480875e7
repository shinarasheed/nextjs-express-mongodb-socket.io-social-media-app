{"ast":null,"code":"import axios from 'axios';\nimport baseUrl from './baseUrl';\nimport catchErrors from './catchErrors';\nimport cookie from 'js-cookie';\nconst Axios = axios.create({\n  baseURL: `${baseUrl}/api/posts`,\n  headers: {\n    Authorization: cookie.get('token')\n  }\n});\nexport const submitNewPost = async (text, location, picUrl, setPosts, setNewPost, setError) => {\n  try {\n    const res = await Axios.post('/', {\n      text,\n      location,\n      picUrl\n    });\n    const newPost = {\n      _id: res.data,\n      user,\n      text,\n      location,\n      picUrl,\n      likes: [],\n      comments: []\n    };\n    setPosts(prev => [newPost, ...prev]);\n    setNewPost({\n      text: '',\n      location: ''\n    });\n  } catch (error) {\n    const errorMsg = catchErrors(error);\n    setError(errorMsg);\n  }\n};\nexport const deletePost = async (postId, setPosts, setShowToastr) => {\n  try {\n    await Axios.delete(`/${postId}`);\n    setPosts(prev => prev.filter(post => post._id !== postId));\n    setShowToastr(true);\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};\nexport const likePost = async (postId, userId, setLikes, like = true) => {\n  try {\n    if (like) {\n      await Axios.post(`/like/${postId}`);\n      setLikes(prev => [...prev, {\n        user: userId\n      }]);\n    } //\n    else if (!like) {\n        await Axios.put(`/unlike/${postId}`);\n        setLikes(prev => prev.filter(like => like.user !== userId));\n      }\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};\nexport const postComment = async (postId, user, text, setComments, setText) => {\n  try {\n    const res = await Axios.post(`/comment/${postId}`, {\n      text\n    });\n    const newComment = {\n      _id: res.data,\n      user,\n      text,\n      date: Date.now()\n    };\n    setComments(prev => [newComment, ...prev]);\n    setText('');\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};\nexport const deleteComment = async (postId, commentId, setComments) => {\n  try {\n    await Axios.delete(`/${postId}/${commentId}`);\n    setComments(prev => prev.filter(comment => comment._id !== commentId));\n  } catch (error) {\n    alert(catchErrors(error));\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Desktop/ADVANCED REACT/mernChat/utils/postActions.js"],"names":["axios","baseUrl","catchErrors","cookie","Axios","create","baseURL","headers","Authorization","get","submitNewPost","text","location","picUrl","setPosts","setNewPost","setError","res","post","newPost","_id","data","user","likes","comments","prev","error","errorMsg","deletePost","postId","setShowToastr","delete","filter","alert","likePost","userId","setLikes","like","put","postComment","setComments","setText","newComment","date","Date","now","deleteComment","commentId","comment"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport baseUrl from './baseUrl';\r\nimport catchErrors from './catchErrors';\r\nimport cookie from 'js-cookie';\r\n\r\nconst Axios = axios.create({\r\n  baseURL: `${baseUrl}/api/posts`,\r\n  headers: { Authorization: cookie.get('token') },\r\n});\r\n\r\nexport const submitNewPost = async (\r\n  text,\r\n  location,\r\n  picUrl,\r\n  setPosts,\r\n  setNewPost,\r\n  setError\r\n) => {\r\n  try {\r\n    const res = await Axios.post('/', { text, location, picUrl });\r\n\r\n    const newPost = {\r\n      _id: res.data,\r\n      user,\r\n      text,\r\n      location,\r\n      picUrl,\r\n      likes: [],\r\n      comments: [],\r\n    };\r\n\r\n    setPosts((prev) => [newPost, ...prev]);\r\n    setNewPost({ text: '', location: '' });\r\n  } catch (error) {\r\n    const errorMsg = catchErrors(error);\r\n    setError(errorMsg);\r\n  }\r\n};\r\n\r\nexport const deletePost = async (postId, setPosts, setShowToastr) => {\r\n  try {\r\n    await Axios.delete(`/${postId}`);\r\n    setPosts((prev) => prev.filter((post) => post._id !== postId));\r\n    setShowToastr(true);\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n\r\nexport const likePost = async (postId, userId, setLikes, like = true) => {\r\n  try {\r\n    if (like) {\r\n      await Axios.post(`/like/${postId}`);\r\n      setLikes((prev) => [...prev, { user: userId }]);\r\n    }\r\n    //\r\n    else if (!like) {\r\n      await Axios.put(`/unlike/${postId}`);\r\n      setLikes((prev) => prev.filter((like) => like.user !== userId));\r\n    }\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n\r\nexport const postComment = async (postId, user, text, setComments, setText) => {\r\n  try {\r\n    const res = await Axios.post(`/comment/${postId}`, { text });\r\n\r\n    const newComment = {\r\n      _id: res.data,\r\n      user,\r\n      text,\r\n      date: Date.now(),\r\n    };\r\n\r\n    setComments((prev) => [newComment, ...prev]);\r\n    setText('');\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n\r\nexport const deleteComment = async (postId, commentId, setComments) => {\r\n  try {\r\n    await Axios.delete(`/${postId}/${commentId}`);\r\n    setComments((prev) => prev.filter((comment) => comment._id !== commentId));\r\n  } catch (error) {\r\n    alert(catchErrors(error));\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}