{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Desktop/ADVANCED REACT/mernChat/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/User/Desktop/ADVANCED REACT/mernChat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\ADVANCED REACT\\\\mernChat\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport baseUrl from '../utils/baseUrl';\nimport CreatePost from '../components/Post/CreatePost';\nimport CardPost from '../components/Post/CardPost';\nimport { Segment } from 'semantic-ui-react';\nimport { parseCookies } from 'nookies';\nimport { NoPosts } from '../components/Layout/NoData';\n\nfunction Index(_ref) {\n  _s();\n\n  var _this = this;\n\n  var user = _ref.user,\n      postsData = _ref.postsData,\n      errorLoading = _ref.errorLoading;\n\n  var _useState = useState(postsData),\n      posts = _useState[0],\n      setPosts = _useState[1];\n\n  var _useState2 = useState(false),\n      showToaster = _useState2[0],\n      setShowToaster = _useState2[1];\n\n  useEffect(function () {\n    document.title = \"Welcome, \".concat(user.name.split(' ')[0]);\n  }, []);\n  if (posts.length === 0 || errorLoading) return __jsx(NoPosts, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 50\n    }\n  });\n  return __jsx(React.Fragment, null, __jsx(Segment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }\n  }, __jsx(CreatePost, {\n    user: user,\n    setPosts: setPosts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }), posts.map(function (post) {\n    return __jsx(CardPost, {\n      key: post._id,\n      post: post,\n      user: user,\n      setPosts: setPosts,\n      setShowToaster: setShowToaster,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 11\n      }\n    });\n  })));\n}\n\n_s(Index, \"49MkPHscPqlKxLOYHAtMkfsDg5o=\");\n\n_c = Index;\n\nIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var _parseCookies, token, res;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _parseCookies = parseCookies(ctx), token = _parseCookies.token;\n            _context.next = 4;\n            return axios.get(\"\".concat(baseUrl, \"/api/posts\"), {\n              headers: {\n                Authorization: token\n              }\n            });\n\n          case 4:\n            res = _context.sent;\n            return _context.abrupt(\"return\", {\n              postsData: res.data\n            });\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", {\n              errorLoading: true\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["C:/Users/User/Desktop/ADVANCED REACT/mernChat/pages/index.js"],"names":["React","useState","useEffect","axios","baseUrl","CreatePost","CardPost","Segment","parseCookies","NoPosts","Index","user","postsData","errorLoading","posts","setPosts","showToaster","setShowToaster","document","title","name","split","length","map","post","_id","getInitialProps","ctx","token","get","headers","Authorization","res","data"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,SAASC,OAAT,QAAwB,mBAAxB;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,SAASC,OAAT,QAAwB,6BAAxB;;AAEA,SAASC,KAAT,OAAkD;AAAA;;AAAA;;AAAA,MAAjCC,IAAiC,QAAjCA,IAAiC;AAAA,MAA3BC,SAA2B,QAA3BA,SAA2B;AAAA,MAAhBC,YAAgB,QAAhBA,YAAgB;;AAAA,kBACtBZ,QAAQ,CAACW,SAAD,CADc;AAAA,MACzCE,KADyC;AAAA,MAClCC,QADkC;;AAAA,mBAEVd,QAAQ,CAAC,KAAD,CAFE;AAAA,MAEzCe,WAFyC;AAAA,MAE5BC,cAF4B;;AAIhDf,EAAAA,SAAS,CAAC,YAAM;AACdgB,IAAAA,QAAQ,CAACC,KAAT,sBAA6BR,IAAI,CAACS,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAA7B;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,MAAIP,KAAK,CAACQ,MAAN,KAAiB,CAAjB,IAAsBT,YAA1B,EAAwC,OAAO,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AAExC,SACE,4BACE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAY,IAAA,IAAI,EAAEF,IAAlB;AAAwB,IAAA,QAAQ,EAAEI,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAGGD,KAAK,CAACS,GAAN,CAAU,UAACC,IAAD;AAAA,WACT,MAAC,QAAD;AACE,MAAA,GAAG,EAAEA,IAAI,CAACC,GADZ;AAEE,MAAA,IAAI,EAAED,IAFR;AAGE,MAAA,IAAI,EAAEb,IAHR;AAIE,MAAA,QAAQ,EAAEI,QAJZ;AAKE,MAAA,cAAc,EAAEE,cALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADS;AAAA,GAAV,CAHH,CADF,CADF;AAiBD;;GA3BQP,K;;KAAAA,K;;AA6BTA,KAAK,CAACgB,eAAN;AAAA,uEAAwB,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAEFnB,YAAY,CAACmB,GAAD,CAFV,EAEZC,KAFY,iBAEZA,KAFY;AAAA;AAAA,mBAIFzB,KAAK,CAAC0B,GAAN,WAAazB,OAAb,iBAAkC;AAClD0B,cAAAA,OAAO,EAAE;AAAEC,gBAAAA,aAAa,EAAEH;AAAjB;AADyC,aAAlC,CAJE;;AAAA;AAIdI,YAAAA,GAJc;AAAA,6CAQb;AAAEpB,cAAAA,SAAS,EAAEoB,GAAG,CAACC;AAAjB,aARa;;AAAA;AAAA;AAAA;AAAA,6CAUb;AAAEpB,cAAAA,YAAY,EAAE;AAAhB,aAVa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAxB;;AAAA;AAAA;AAAA;AAAA;;AAcA,eAAeH,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport baseUrl from '../utils/baseUrl';\r\nimport CreatePost from '../components/Post/CreatePost';\r\nimport CardPost from '../components/Post/CardPost';\r\nimport { Segment } from 'semantic-ui-react';\r\nimport { parseCookies } from 'nookies';\r\nimport { NoPosts } from '../components/Layout/NoData';\r\n\r\nfunction Index({ user, postsData, errorLoading }) {\r\n  const [posts, setPosts] = useState(postsData);\r\n  const [showToaster, setShowToaster] = useState(false);\r\n\r\n  useEffect(() => {\r\n    document.title = `Welcome, ${user.name.split(' ')[0]}`;\r\n  }, []);\r\n\r\n  if (posts.length === 0 || errorLoading) return <NoPosts />;\r\n\r\n  return (\r\n    <>\r\n      <Segment>\r\n        <CreatePost user={user} setPosts={setPosts} />\r\n\r\n        {posts.map((post) => (\r\n          <CardPost\r\n            key={post._id}\r\n            post={post}\r\n            user={user}\r\n            setPosts={setPosts}\r\n            setShowToaster={setShowToaster}\r\n          />\r\n        ))}\r\n      </Segment>\r\n    </>\r\n  );\r\n}\r\n\r\nIndex.getInitialProps = async (ctx) => {\r\n  try {\r\n    const { token } = parseCookies(ctx);\r\n\r\n    const res = await axios.get(`${baseUrl}/api/posts`, {\r\n      headers: { Authorization: token },\r\n    });\r\n\r\n    return { postsData: res.data };\r\n  } catch (error) {\r\n    return { errorLoading: true };\r\n  }\r\n};\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}