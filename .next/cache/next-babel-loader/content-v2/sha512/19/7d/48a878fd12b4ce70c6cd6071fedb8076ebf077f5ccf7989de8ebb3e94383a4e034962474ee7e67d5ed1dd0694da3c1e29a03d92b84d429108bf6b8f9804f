{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Desktop/ADVANCED REACT/mernChat/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/User/Desktop/ADVANCED REACT/mernChat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\ADVANCED REACT\\\\mernChat\\\\components\\\\Layout\\\\Search.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { List, Image, Search } from 'semantic-ui-react';\nimport axios from 'axios';\nimport cookie from 'js-cookie';\nimport Router from 'next/router';\nimport baseUrl from '../../utils/baseUrl';\nimport { result } from 'lodash-es';\nvar cancel;\n\nvar SearchUser = function SearchUser() {\n  _s();\n\n  var _useState = useState(''),\n      text = _useState[0],\n      setText = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      results = _useState3[0],\n      setResults = _useState3[1];\n\n  var handleChange = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var value, CancelToken, token, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              value = e.target.value;\n              setText(value);\n              setLoading(true);\n              _context.prev = 3;\n              cancel && cancel();\n              CancelToken = axios.CancelToken;\n              token = cookie.get('token');\n              _context.next = 9;\n              return axios.get(\"\".concat(baseUrl, \"/api/search/\").concat(value), {\n                headers: {\n                  Authorizatin: token\n                },\n                cancelToken: new CancelToken(function (canceler) {\n                  cancel = canceler;\n                })\n              });\n\n            case 9:\n              res = _context.sent;\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](3);\n              console.log('Error Searching');\n\n            case 15:\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 12]]);\n    }));\n\n    return function handleChange(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Search, {\n    onBlur: function onBlur() {\n      return result.length > 0 && setResults([]);\n    },\n    loading: loading,\n    value: text,\n    resultRenderer: ResultRenderer,\n    result: results,\n    onSearchChange: handleChange,\n    minCharacters: 1,\n    onResultSelect: function onResultSelect(e, data) {\n      console.log(data.result);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  });\n}; // const ResultRenderer = (props) => {\n//   console.log(props);\n// };\n\n\n_s(SearchUser, \"6Jwf/oJp6sJ1WtIy3yN4GjlOGJs=\");\n\n_c = SearchUser;\nexport default SearchUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchUser\");","map":{"version":3,"sources":["C:/Users/User/Desktop/ADVANCED REACT/mernChat/components/Layout/Search.js"],"names":["React","useState","List","Image","Search","axios","cookie","Router","baseUrl","result","cancel","SearchUser","text","setText","loading","setLoading","results","setResults","handleChange","e","value","target","CancelToken","token","get","headers","Authorizatin","cancelToken","canceler","res","console","log","length","ResultRenderer","data"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,MAAtB,QAAoC,mBAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,SAASC,MAAT,QAAuB,WAAvB;AACA,IAAIC,MAAJ;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AAAA;;AAAA,kBACCV,QAAQ,CAAC,EAAD,CADT;AAAA,MAChBW,IADgB;AAAA,MACVC,OADU;;AAAA,mBAEOZ,QAAQ,CAAC,KAAD,CAFf;AAAA,MAEhBa,OAFgB;AAAA,MAEPC,UAFO;;AAAA,mBAGOd,QAAQ,CAAC,EAAD,CAHf;AAAA,MAGhBe,OAHgB;AAAA,MAGPC,UAHO;;AAKvB,MAAMC,YAAY;AAAA,wEAAG,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,cAAAA,KADW,GACDD,CAAC,CAACE,MADD,CACXD,KADW;AAEnBP,cAAAA,OAAO,CAACO,KAAD,CAAP;AACAL,cAAAA,UAAU,CAAC,IAAD,CAAV;AAHmB;AAKjBL,cAAAA,MAAM,IAAIA,MAAM,EAAhB;AACMY,cAAAA,WANW,GAMGjB,KAAK,CAACiB,WANT;AAOXC,cAAAA,KAPW,GAOHjB,MAAM,CAACkB,GAAP,CAAW,OAAX,CAPG;AAAA;AAAA,qBAQCnB,KAAK,CAACmB,GAAN,WAAahB,OAAb,yBAAmCY,KAAnC,GAA4C;AAC5DK,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,YAAY,EAAEH;AAAhB,iBADmD;AAE5DI,gBAAAA,WAAW,EAAE,IAAIL,WAAJ,CAAgB,UAACM,QAAD,EAAc;AACzClB,kBAAAA,MAAM,GAAGkB,QAAT;AACD,iBAFY;AAF+C,eAA5C,CARD;;AAAA;AAQXC,cAAAA,GARW;AAAA;AAAA;;AAAA;AAAA;AAAA;AAmBjBC,cAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;;AAnBiB;AAqBnBhB,cAAAA,UAAU,CAAC,KAAD,CAAV;;AArBmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZG,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAuBA,SACE,MAAC,MAAD;AACE,IAAA,MAAM,EAAE;AAAA,aAAMT,MAAM,CAACuB,MAAP,GAAgB,CAAhB,IAAqBf,UAAU,CAAC,EAAD,CAArC;AAAA,KADV;AAEE,IAAA,OAAO,EAAEH,OAFX;AAGE,IAAA,KAAK,EAAEF,IAHT;AAIE,IAAA,cAAc,EAAEqB,cAJlB;AAKE,IAAA,MAAM,EAAEjB,OALV;AAME,IAAA,cAAc,EAAEE,YANlB;AAOE,IAAA,aAAa,EAAE,CAPjB;AAQE,IAAA,cAAc,EAAE,wBAACC,CAAD,EAAIe,IAAJ,EAAa;AAC3BJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAI,CAACzB,MAAjB;AACD,KAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAcD,CA1CD,C,CA4CA;AACA;AACA;;;GA9CME,U;;KAAAA,U;AAgDN,eAAeA,UAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport { List, Image, Search } from 'semantic-ui-react';\r\nimport axios from 'axios';\r\nimport cookie from 'js-cookie';\r\nimport Router from 'next/router';\r\nimport baseUrl from '../../utils/baseUrl';\r\nimport { result } from 'lodash-es';\r\nlet cancel;\r\n\r\nconst SearchUser = () => {\r\n  const [text, setText] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [results, setResults] = useState([]);\r\n\r\n  const handleChange = async (e) => {\r\n    const { value } = e.target;\r\n    setText(value);\r\n    setLoading(true);\r\n    try {\r\n      cancel && cancel();\r\n      const CancelToken = axios.CancelToken;\r\n      const token = cookie.get('token');\r\n      const res = await axios.get(`${baseUrl}/api/search/${value}`, {\r\n        headers: { Authorizatin: token },\r\n        cancelToken: new CancelToken((canceler) => {\r\n          cancel = canceler;\r\n        }),\r\n      });\r\n\r\n      // if (res.data.length === 0) return setLoading(true);\r\n\r\n      // setResults(res.data);\r\n    } catch (error) {\r\n      console.log('Error Searching');\r\n    }\r\n    setLoading(false);\r\n  };\r\n  return (\r\n    <Search\r\n      onBlur={() => result.length > 0 && setResults([])}\r\n      loading={loading}\r\n      value={text}\r\n      resultRenderer={ResultRenderer}\r\n      result={results}\r\n      onSearchChange={handleChange}\r\n      minCharacters={1}\r\n      onResultSelect={(e, data) => {\r\n        console.log(data.result);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\n// const ResultRenderer = (props) => {\r\n//   console.log(props);\r\n// };\r\n\r\nexport default SearchUser;\r\n"]},"metadata":{},"sourceType":"module"}