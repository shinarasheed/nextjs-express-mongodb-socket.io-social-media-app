{"ast":null,"code":"import _extends from \"C:/Users/User/Desktop/ADVANCED REACT/mernChat/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\ADVANCED REACT\\\\mernChat\\\\components\\\\Post\\\\CardPost.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { Card, Icon, Image, Divider, Segment, Button, Popup, Header, Modal } from 'semantic-ui-react';\nimport PostComments from './PostComments';\nimport CommentInputField from './CommentInputField';\nimport calculateTime from '../../utils/calculateTime';\nimport Link from 'next/link';\nimport { deletePost, likePost } from '../../utils/postActions';\nimport LikesList from './LikesList';\nimport ImageModal from './ImageModal';\nimport NoImageModal from './NoImageModal';\n\nfunction CardPost(_ref) {\n  _s();\n\n  var _this = this;\n\n  var post = _ref.post,\n      user = _ref.user,\n      setPosts = _ref.setPosts,\n      setShowToastr = _ref.setShowToastr;\n\n  var _useState = useState(post.likes),\n      likes = _useState[0],\n      setLikes = _useState[1];\n\n  var isLiked = likes.length > 0 && likes.filter(function (like) {\n    return like.user === user._id;\n  }).length > 0;\n\n  var _useState2 = useState(post.comments),\n      comments = _useState2[0],\n      setComments = _useState2[1];\n\n  var _useState3 = useState(null),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useState4 = useState(false),\n      showModal = _useState4[0],\n      setShowModal = _useState4[1];\n\n  var addPropsToModal = function addPropsToModal() {\n    return {\n      post: post,\n      user: user,\n      setLikes: setLikes,\n      likes: likes,\n      isLiked: isLiked,\n      comments: comments,\n      setComments: setComments\n    };\n  };\n\n  return __jsx(React.Fragment, null, showModal && __jsx(Modal, {\n    open: showModal,\n    closeIcon: true,\n    closeOnDimmerClick: true,\n    onClose: function onClose() {\n      return setShowModal(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, post.picUrl ? __jsx(ImageModal, _extends({}, addPropsToModal(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  })) : __jsx(NoImageModal, _extends({}, addPropsToModal(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  })))), __jsx(Segment, {\n    basic: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, __jsx(Card, {\n    color: \"teal\",\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, post.picUrl && __jsx(Image, {\n    src: post.picUrl,\n    style: {\n      cursor: 'pointer'\n    },\n    floated: \"left\",\n    wrapped: true,\n    ui: false,\n    alt: \"PostImage\",\n    onClick: function onClick() {\n      return setShowModal(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }), __jsx(Card.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, __jsx(Image, {\n    floated: \"left\",\n    src: post.user.profilePicUrl,\n    avatar: true,\n    circular: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }), (user.role === 'root' || post.user._id === user._id) && __jsx(React.Fragment, null, __jsx(Popup, {\n    on: \"click\",\n    position: \"top right\",\n    trigger: __jsx(Image, {\n      src: \"/deleteIcon.svg\",\n      style: {\n        cursor: 'pointer'\n      },\n      size: \"mini\",\n      floated: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, __jsx(Header, {\n    as: \"h4\",\n    content: \"Are you sure?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 19\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, \"This action is irreversible!\"), __jsx(Button, {\n    color: \"red\",\n    icon: \"trash\",\n    content: \"Delete\",\n    onClick: function onClick() {\n      return deletePost(post._id, setPosts, setShowToastr);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }))), __jsx(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, __jsx(Link, {\n    href: \"/\".concat(post.user.username),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, post.user.name))), __jsx(Card.Meta, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, calculateTime(post.createdAt)), post.location && __jsx(Card.Meta, {\n    content: post.location,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 31\n    }\n  }), __jsx(Card.Description, {\n    style: {\n      fontSize: '17px',\n      letterSpacing: '0.1px',\n      wordSpacing: '0.35px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, post.text)), __jsx(Card.Content, {\n    extra: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, __jsx(Icon, {\n    name: isLiked ? 'heart' : 'heart outline',\n    color: \"red\",\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: function onClick() {\n      return likePost(post._id, user._id, setLikes, isLiked ? false : true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }), __jsx(LikesList, {\n    postId: post._id,\n    trigger: likes.length > 0 && __jsx(\"span\", {\n      className: \"spanLikesList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }\n    }, \"\".concat(likes.length, \" \").concat(likes.length === 1 ? 'like' : 'likes')),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }), __jsx(Icon, {\n    name: \"comment outline\",\n    style: {\n      marginLeft: '7px'\n    },\n    color: \"blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }), comments.length > 0 && comments.map(function (comment, i) {\n    return i < 3 && __jsx(PostComments, {\n      key: comment._id,\n      comment: comment,\n      postId: post._id,\n      user: user,\n      setComments: setComments,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    });\n  }), comments.length > 3 && __jsx(Button, {\n    content: \"View More\",\n    color: \"teal\",\n    basic: true,\n    circular: true,\n    onClick: function onClick() {\n      return setShowModal(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }), __jsx(Divider, {\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }), __jsx(CommentInputField, {\n    user: user,\n    postId: post._id,\n    setComments: setComments,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  })))), __jsx(Divider, {\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(CardPost, \"omR1xcd1MbppzuKtTDTb5rgaEDk=\");\n\n_c = CardPost;\nexport default CardPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardPost\");","map":{"version":3,"sources":["C:/Users/User/Desktop/ADVANCED REACT/mernChat/components/Post/CardPost.js"],"names":["React","useState","Card","Icon","Image","Divider","Segment","Button","Popup","Header","Modal","PostComments","CommentInputField","calculateTime","Link","deletePost","likePost","LikesList","ImageModal","NoImageModal","CardPost","post","user","setPosts","setShowToastr","likes","setLikes","isLiked","length","filter","like","_id","comments","setComments","error","setError","showModal","setShowModal","addPropsToModal","picUrl","cursor","profilePicUrl","role","username","name","createdAt","location","fontSize","letterSpacing","wordSpacing","text","marginLeft","map","comment","i"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Card,\r\n  Icon,\r\n  Image,\r\n  Divider,\r\n  Segment,\r\n  Button,\r\n  Popup,\r\n  Header,\r\n  Modal,\r\n} from 'semantic-ui-react';\r\nimport PostComments from './PostComments';\r\nimport CommentInputField from './CommentInputField';\r\nimport calculateTime from '../../utils/calculateTime';\r\nimport Link from 'next/link';\r\nimport { deletePost, likePost } from '../../utils/postActions';\r\nimport LikesList from './LikesList';\r\nimport ImageModal from './ImageModal';\r\nimport NoImageModal from './NoImageModal';\r\n\r\nfunction CardPost({ post, user, setPosts, setShowToastr }) {\r\n  const [likes, setLikes] = useState(post.likes);\r\n\r\n  const isLiked =\r\n    likes.length > 0 &&\r\n    likes.filter((like) => like.user === user._id).length > 0;\r\n\r\n  const [comments, setComments] = useState(post.comments);\r\n\r\n  const [error, setError] = useState(null);\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const addPropsToModal = () => ({\r\n    post,\r\n    user,\r\n    setLikes,\r\n    likes,\r\n    isLiked,\r\n    comments,\r\n    setComments,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {showModal && (\r\n        <Modal\r\n          open={showModal}\r\n          closeIcon\r\n          closeOnDimmerClick\r\n          onClose={() => setShowModal(false)}\r\n        >\r\n          <Modal.Content>\r\n            {post.picUrl ? (\r\n              <ImageModal {...addPropsToModal()} />\r\n            ) : (\r\n              <NoImageModal {...addPropsToModal()} />\r\n            )}\r\n          </Modal.Content>\r\n        </Modal>\r\n      )}\r\n\r\n      <Segment basic>\r\n        <Card color=\"teal\" fluid>\r\n          {post.picUrl && (\r\n            <Image\r\n              src={post.picUrl}\r\n              style={{ cursor: 'pointer' }}\r\n              floated=\"left\"\r\n              wrapped\r\n              ui={false}\r\n              alt=\"PostImage\"\r\n              onClick={() => setShowModal(true)}\r\n            />\r\n          )}\r\n\r\n          <Card.Content>\r\n            <Image\r\n              floated=\"left\"\r\n              src={post.user.profilePicUrl}\r\n              avatar\r\n              circular\r\n            />\r\n\r\n            {(user.role === 'root' || post.user._id === user._id) && (\r\n              <>\r\n                <Popup\r\n                  on=\"click\"\r\n                  position=\"top right\"\r\n                  trigger={\r\n                    <Image\r\n                      src=\"/deleteIcon.svg\"\r\n                      style={{ cursor: 'pointer' }}\r\n                      size=\"mini\"\r\n                      floated=\"right\"\r\n                    />\r\n                  }\r\n                >\r\n                  <Header as=\"h4\" content=\"Are you sure?\" />\r\n                  <p>This action is irreversible!</p>\r\n\r\n                  <Button\r\n                    color=\"red\"\r\n                    icon=\"trash\"\r\n                    content=\"Delete\"\r\n                    onClick={() =>\r\n                      deletePost(post._id, setPosts, setShowToastr)\r\n                    }\r\n                  />\r\n                </Popup>\r\n              </>\r\n            )}\r\n\r\n            <Card.Header>\r\n              <Link href={`/${post.user.username}`}>\r\n                <a>{post.user.name}</a>\r\n              </Link>\r\n            </Card.Header>\r\n\r\n            <Card.Meta>{calculateTime(post.createdAt)}</Card.Meta>\r\n\r\n            {post.location && <Card.Meta content={post.location} />}\r\n\r\n            <Card.Description\r\n              style={{\r\n                fontSize: '17px',\r\n                letterSpacing: '0.1px',\r\n                wordSpacing: '0.35px',\r\n              }}\r\n            >\r\n              {post.text}\r\n            </Card.Description>\r\n          </Card.Content>\r\n\r\n          <Card.Content extra>\r\n            <Icon\r\n              name={isLiked ? 'heart' : 'heart outline'}\r\n              color=\"red\"\r\n              style={{ cursor: 'pointer' }}\r\n              onClick={() =>\r\n                likePost(post._id, user._id, setLikes, isLiked ? false : true)\r\n              }\r\n            />\r\n\r\n            <LikesList\r\n              postId={post._id}\r\n              trigger={\r\n                likes.length > 0 && (\r\n                  <span className=\"spanLikesList\">\r\n                    {`${likes.length} ${likes.length === 1 ? 'like' : 'likes'}`}\r\n                  </span>\r\n                )\r\n              }\r\n            />\r\n\r\n            <Icon\r\n              name=\"comment outline\"\r\n              style={{ marginLeft: '7px' }}\r\n              color=\"blue\"\r\n            />\r\n\r\n            {comments.length > 0 &&\r\n              comments.map(\r\n                (comment, i) =>\r\n                  i < 3 && (\r\n                    <PostComments\r\n                      key={comment._id}\r\n                      comment={comment}\r\n                      postId={post._id}\r\n                      user={user}\r\n                      setComments={setComments}\r\n                    />\r\n                  )\r\n              )}\r\n\r\n            {comments.length > 3 && (\r\n              <Button\r\n                content=\"View More\"\r\n                color=\"teal\"\r\n                basic\r\n                circular\r\n                onClick={() => setShowModal(true)}\r\n              />\r\n            )}\r\n\r\n            <Divider hidden />\r\n\r\n            <CommentInputField\r\n              user={user}\r\n              postId={post._id}\r\n              setComments={setComments}\r\n            />\r\n          </Card.Content>\r\n        </Card>\r\n      </Segment>\r\n      <Divider hidden />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CardPost;\r\n"]},"metadata":{},"sourceType":"module"}